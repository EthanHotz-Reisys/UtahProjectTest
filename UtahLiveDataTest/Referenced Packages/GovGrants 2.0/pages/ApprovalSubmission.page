<!-- 
    Page shows when a record is submitted for Approval when Submit for Approval Button is clicked
     
    Audit History
    ***********************************************************
    03/31/2014      Vineeth Shetty             Created
 -->
<apex:page controller="GNT.ApprovalSubmissionCtrl" showHeader="false" sidebar="false" standardStylesheets="false" >
<c:ExternalLibrary />
 <apex:stylesheet value="{!themeDocURL}" />
 
 <div id="modalDiv" class="bs container-fluid" style="clear:both; width:100%;height:100%; min-height : 180px !important;max-height:200 px!important;overflow:auto;">
 
<div class="bs" >        
    <!--   padding-left:30px; -->
<div id="" class="container-fluid center-block" style="clear:both; width:100%;height:100%;">
   <!-- <div class="row ">
      <div class="col-md-12 ">-->
         <apex:form >
            <apex:outputPanel id="emptyPanel">
                <apex:outputPanel rendered="{!isError}">
                       <!--  <c:PageMessages /> -->
                   <div id="approvalError" class="bs alert {!if(isError==true,'alert-danger','alert-success')} border-msg">
                        <a onclick="parent.adjustModalHeight()" data-dismiss="alert" aria-hidden="true"><span class="fa fa-times close" ></span><span class="hidden508">Close</span></a>                       
                        <div class="divError">
                            <apex:outputpanel rendered="{!isError}"> 
                                <apex:outputText styleClass="dynamic-msg-box-margin"  value="The following error(s) occurred:" escape="false" />
                                <apex:outputPanel >
                                    <apex:outputText styleClass="dynamic-msg-box-margin" value="{!errorMessage}" escape="false"/>
                                </apex:outputPanel>                 
                            </apex:outputpanel>
                        </div>
                   </div>
                </apex:outputPanel>
            </apex:outputPanel>
            <!-- <div class="panel panel-default border-add"> -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">{!recordType} - {!recordName}</h3>
                </div>
                    <div class="panel-body clearfix">
                            <div id="areYouSureMessage" class="button-margin row">
                                <div class="panelMessages col-md-4  col-md-offset-4">Are you sure you want to Submit for Approval? </div> <br/> <br/>
                                <div class="" style="text-align:center">
                                 <span>
                                    <apex:commandButton action="{!submitForApproval}" value="Yes" styleClass="customBtn" rerender="emptyPanel" oncomplete="checkError({!isError})" />
                                  </span>
                                  <span>   <apex:commandButton onclick="parent.closeModal();parent.openViewPage();" value="No" styleClass="customBtn" />
                                 </span>
                                </div>
                            </div>
                    </div>
            </div>
         </apex:form>
      <!--  </div>
        </div>-->
    </div>
    </div>  
 </div>
        <script>
            var j$ = jQuery.noConflict();
            function checkError(isError){
                //var isError = '{!isError}';
                ////console.log('{!isError}');
                //console.log(isError);
                if(isError == true || isError == 'true'){       
                    parent.checkError();
                }else{
                    parent.openViewPage();
                }
                
            }
        </script>
</apex:page>